<li class="mb1 text-sm">
  <div class="flex flex-row gap-2">
    <% if defined?(icon) && defined?(color) %>
      <%= inline_icon icon, width: 24, class: "bg-#{color}", style: "height: 24px; color: white; border-radius: 999px; padding: 4px;" %>
    <% else %>
      <%= avatar_for(defined?(hide_owner) && hide_owner ? nil : activity.owner, default_image: "https://hc-cdn.hel1.your-objectstorage.com/s/v3/010fba29b83bf91b_image.png") %>
    <% end %>
    <div class="flex flex-col" style="transform: translateY(-3px); line-height: 1.6">
      <span>
        <% unless defined?(hide_owner) && hide_owner %>
          <% if activity.owner == current_user %>
            <% if local_assigns[:possessive] %>
              Your
            <% else %>
              You
            <% end %>
          <% else %>
            <span class="muted"><%= activity.owner&.name || "A user" %></span><%= "'s" if local_assigns[:possessive] %>
          <% end %>
        <% end %>
        <%= yield %>
      </span>
      <div class="flex items-center">
        <% url = hcb_code_path(activity.trackable.hcb_code) if activity.trackable.try(:hcb_code) %>
        <% if defined?(url) && url %>
          <%= link_to url, class: "flex items-center", target: "_blank" do %>
            <%= inline_icon "link", width: 20, class: "muted ml-[-4px] mr-[2px]" %>
          <% end %>
        <% end %>
        <span class="align-middle timestamp" style="cursor: default" data-controller="timestamp" data-timestamp-time-value="<%= activity.created_at.to_i * 1000 %>">
          <%= time_ago_in_words activity.created_at %> ago
        </span>
      </div>
    </div>
  </div>
</li>
