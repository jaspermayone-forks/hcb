<%# locals: (card_grant:, label: "") %>

<% pre_authorization_tooltip = if label.presence
                                 label
                               elsif policy(card_grant).disable_pre_authorization?
                                 "Disable pre-authorizations for this grant"
                               else
                                 "You don't have permission to perform this action"
                               end %>
<%= link_to disable_pre_authorization_event_card_grant_path(id: card_grant.hashid, event_id: @event.slug),
            method: :post,
            class: "btn btn--list-item",
            disabled: !policy(card_grant).disable_pre_authorization? do %>
  <%= inline_icon "pre-authorization", size: 20 %>
  <div>
    <p><strong>Disable pre-authorization</strong></p>
    <p class="text-sm opacity-60"><%= pre_authorization_tooltip %></p>
  </div>
<% end %>
